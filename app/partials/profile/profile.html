<div ng-include="'partials/headerhome.html'"></div>

<script type="text/javascript">

var socket = io.connect("https://fluted-house-215816.appspot.com");
//var socket = io.connect("http://104.196.9.222:5555");
//var socket = io.connect("http://localhost:8888");
var siofu = new SocketIOFileUpload(socket);

let filesCount = 0;

let progressCloud = 0;
var progressPercent = 0;

document.getElementById("upload_btn").addEventListener("click", siofu.prompt, false);

// Do something on upload progress:
siofu.addEventListener("progress", function(event){
  var percent = event.bytesLoaded / event.file.size * 100;
  console.log("File is", percent.toFixed(2), "percent loaded");

  $("#file_drop").html("Upload: " + percent.toFixed(2) + "%");

  if (percent.toFixed(2) == 100) {
    $("#file_drop").html("<b>Iniciando o processamento da imagem</b>");
  }

});

socket.on("progressProgressing", function(a){

  let progressPercent = a;

  $("#file_drop").html("<b>Processando o vídeo:</b> " + progressPercent.toFixed(2) + "%");

});

socket.on("status", function(a){
  console.log("status: ")
  console.log(a)
  if (a == 1) {

  }
  if (a == 2) {
    $("#file_drop").html("<b>Upload completo!</b>");
  }
});

socket.on("files", function(a){
  console.log("files: ")
  console.log(a)
  filesCount = a;
});

// Do something when a file is uploaded:
siofu.addEventListener("complete", function(event){
    console.log(event.success);
    console.log(event.file);
    console.log(event)
});

socket.on("imagepath", function(a) {
  $("#file").attr("value", a);
  $(".profile-pic").attr("style", "background-image: url('" + a + "')");
  console.log(a)
})

</script>

<div class="container-fluid container-full profile-container" style="padding-bottom: 50px;">
  <div class="row">

    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-4 academia-content">

      <div class="profile-pic" ng-if="student.imageUrl != undefined" style="background-image: url('{{student.imageUrl}}')"></div>
      <div class="profile-pic" ng-if="student.imageUrl == undefined" style="background-image: url('http://virtual-strategy.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png')"></div>

      <div class="profile-manage-wrapper">
        <h4 ng-click="imageEdit = true">Modificar foto</h4>
        <div ng-show="imageEdit">
          <input type="hidden" id="file" ng-model="file">
          <button class="btn bg-base" id="upload_btn" style="color: #fff; margin-bottom: 15px;">Selecionar foto</button>
          <button class="btn bg-primary-green" style="color: #fff;" ng-click="saveImage()">Salvar foto</button>
        </div>
      </div>

      <div class="profile-manage-wrapper">

        <h4 ng-click="passwordEdit = true" style="margin-bottom: 15px; margin-top: 15px;">Modificar a sua senha</h4>

        <div ng-show="passwordEdit" class="form-group" style="margin-top: 15px;">
          <label>Nova senha</label>
          <input ng-model="password" placeholder="Escreva aqui a sua nova senha" type="text" style="margin-bottom: 15px;" class="ng-pristine ng-valid ng-empty ng-touched">
          <button class="btn bg-primary-green" style="color: #fff;" ng-click="savePassword()">Salvar senha</button>
        </div>

      </div>

    </div>
    <!-- end col-xs-12 -->

    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-7">

      <div class="profile-name">{{student.name}}</div>

      <div class="profile-bio">

        <div class="title">Biografia <button ng-click="editBio()" class="btn-clean" style="float: right;" ng-hide="edit"><span class="glyphicon glyphicon glyphicon-pencil" style="padding-right: 5px;"></span> Edit</button><button ng-show="edit" ng-click="saveBio()" class="btn-clean" style="float: right; color: #30b39f;"><i class="fas fa-check" style="padding-right: 10px;"></i>Save</button></div>
        <div class="short" ng-hide="edit"><div ng-if="student.bioShort != undefined">{{student.bioShort}}</div><div ng-if="student.bioShort == undefined">Clique em editar e escreva aqui uma curta descrição sobre você.</div></div>
        <div class="edit" ng-show="edit"><textarea ng-model="short" class="short"></textarea></div>
        <div class="text" ng-hide="edit"><div ng-if="student.bioLong != undefined">{{student.bioLong}}</div><div ng-if="student.bioLong == undefined">Clique em editar e escreva aqui a sua biografia.</div></div>
        <div class="edit" ng-show="edit"><textarea ng-model="text" class="text"></textarea></div>

      </div>
      <!-- end profile-bio -->

    </div>
    <!-- end col-xs-12 -->

  </div>
  <!-- end row -->

</div>
<!-- container-full -->
